name: 🚀 Deploy Campus Party Dashboard

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    name: 🎉 Deploy via FTP (cPanel)
    runs-on: ubuntu-latest
    
    steps:
      - name: 🚚 Baixar código
        uses: actions/checkout@v4
      
      - name: 🔍 Debug DNS
        run: |
          echo "Testando resolução DNS..."
          nslookup ftp.linuxgo.com.br
          ping -c 2 ftp.linuxgo.com.br || echo "Ping pode falhar por firewall"
      
      - name: 📂 Deploy via FTP
        uses: SamKirkland/FTP-Deploy-Action@v4.3.5
        with:
          server: ftp.linuxgo.com.br
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          port: 21
          protocol: ftp
          server-dir: /public_html/campus-party/
          timeout: 60000
